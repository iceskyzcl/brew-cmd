# VIM keyblinding

- `vim --version`: 显示配置信息
- `vim file1 file2`: 打开文件


## 文件命令
- `:h xx`: 显示xx的帮助
  - `<C-]>`: 进入帮助页面中的链接
  - `<C-o>`: 从链接页返回
- `:wq`: 保存并关闭
- `:q!`: 关闭不保存
- `:e!`: 放弃所有修改重新打开
- `:e filePath`: 打开远程文件
- `:open file`: 在当前窗口打开file
- `:bn`: 切换到缓冲区下一个文件 buffer next
- `:bp`: 切换到缓冲区上一个文件 buffer previous
- `:args`: 查看打开的文件列表
- `:reg`: 查看寄存器列表


## 窗口
- `:new file`: 在新窗口打开file
- `:sp file`: 水平split窗口, 等同于`:new`
- `:vsp`: 垂直split
- `:close`: 关闭当前窗口
- `:only`: 关闭除当前窗口外的其它窗口
- `<C-w>`: hjkltb切换窗口


## 标签页
- `:tabnew file`: 在新标签页打开file
- `:tabc`: 关闭当前标签页
- `:tabo`: 关闭除当前窗口外的其它标签页
- `:tabn`: 切换到后一个标签页
- `:tabp`: 切换到前一个标签页
- `:tabs`: 查看打开的标签列表
- `:tabdo [cmd]`: 在所有打开的标签页中执行命令


## 移动光标
- `h`: ←
- `j`: ↓
- `k`: ↑
- `l`: →
- `w`: 下一个单词首部
- `b`: 上一个单词首部
- `e`: 下一个单词尾部
- `0`: 行首
- `^`: 行首非空白字符
- $ : 行尾
- `(`: 上一句句首
- `)`: 下一句句首
- `{`: 上一段段首
- `}`: 下一段段首
- `[[`: 上一个以`{`开头的行首
- `]]`: 下一个以`{`开头的行首
- `gg`: 文件开头
- `G`: 文件末行开头
- `:{num}`: 第{num}行开头, 等同于`{num}G`
- `%`: 跳转到匹配括号
- `f{char}`: 当前行向右跳转到字符{char}
- `F{char}`: 当前行向左跳转到字符{char}
- `t{char}`: 当前行向右跳转到字符{char}的前一个字符
- `T{char}`: 当前行向左跳转到字符{char}的前一个字符
  - `;`: 重复跳转命令
  - `,`: 反向重复跳转命令
- `m{char}`: 当前行标记{char}
- `'{char}`: 跳转到标记{char}
- `''`: 来回跳转
- `'[`: 跳转到最后修改的行首
- `:marks`: 查看标记列表
- `H`: 当前屏幕首行
- `M`: 中当前屏幕首间行
- `L`: 末当前屏幕首行


## 滚屏
- `zt`: 当前行置于顶端
- `zb`: 当前行置于底端
- `zz`: 当前行置于中间
- `<C-y>`: 向上滚动一行
- `<C-e>`: 向下滚动一行
- `<C-u>`: 向上滚动半屏
- `<C-d>`: 向下滚动半屏
- `<C-b>`: 向上滚动一屏
- `<C-f>`: 向下滚动一屏


## 插入模式INSERT
- `i`: 当前位置左insert
- `a`: 当前位置右append
- `o`: 当前行后插入新行
- `s`: 删除当前字符并开始插入
- `I`: 行首插入
- `A`: 行尾插入
- `O`: 当前行前插入新行
- `S`: 删除当前行并开始插入

插入模式下:
- `<C-w>`: 删除前一个单词(linux通用)
- `<C-u>`: 删除至行首(linux通用)
- `<C-o>`: 切换到插入-普通模式, 输入命令后自动回到插入模式
- `<C-r>{reg}`: 插入相应寄存器内容
- `<C-r>=`: 使用表达式寄存器做运算


## 可视模式VISUAL
- `v`: 字符选择
- `V`: 行选择
- `<C-v>`: 列块选择
- `gv`: 重选上次选区

可视模式下:
- `o`: 切换选区活动端


## 操作符
- `c`: 修改, 即剪切并进入插入模式
- `d`: 剪切
- `y`: 拷贝
- `>`: 增加缩进
- `<`: 减少缩进
- `=`: 自动缩进
- `g~`: 反转大小写
- `gu`: 转换为小写
- `gU`: 转换为大写
- `!`: 使用外部程序过滤选择范围所跨越的行

正常模式下, 操作=操作符+<a href='#motion'>选择范围</a>。
连续调用两次操作符则作用于当前行。
- `d移动`: 剪切至移动位置
- `daw`: 剪切当前单词(含一个空格) a word
- `dd`: 剪切当前行
- `cc`: 剪切当前行并保留缩进
- `yy`: 拷贝当前行
- `>>`: 当前行增加缩进
- `guu`: 当前行转换为小写
- `!!{filter}`: 用外部程序{filter}过滤当前行

> `tpope/vim-commentary`注释插件操作符:
- `gc`: 注释
  - `gcc`: 注释当前行
  - `gcap`: 注释当前段落
> `tpope/vim-surround`符号对插件操作符:
- `ys`: 添加符号对, 使用左括号会留一个空格, 使用右括号不留空格。
  - `yss)`: 当前行前后添加(), 等同于`yssb`, b/B/r/a等同于)}]>
  - `ysap{`: 当前段落前后添加{}
- `cs`: 修改符号对
  - `cs"<p>`: 符号对""改为<p></p>
- `ds`: 删除符号对
  - `ds(`: 删除()


## <a name='motion'>选择范围motion</a>
- `aw`: 当前单词(含一个空格) a word
- `iw`: 当前单词(不含前后空格) inner word
- `aW`: 连续非空格字符串(含一个空格) a WORD
- `iW`: 连续非空格字符串(不含前后空格) inner WORD
- `as`: 句子(含一个空格) a sentence
- `is`: 句子(不含前后空格) inner sentence
- `ap`: 段落(含一个空行) a paragraph
- `ip`: 段落(不含前后空行) inner paragraph
- `a]`: []区块(含) a [] block
- `i]`: []区块(不含) inner [] block
- `at`: 标签块(含) a tag block 如<a></a>
- `it`: 标签块(不含) inner tab block
- `gn`: 下一个搜索匹配
- `gN`: 上一个搜索匹配

## 剪切
- `x`: 剪切当前字符或选中内容


## 粘贴
- `p`: 右侧或下一行粘贴
- `P`: 左侧或上一行粘贴


## 合并下一行
- `J`: 删除当前行换行符


## 重复
- `.`: 重复上一次修改
- `{num}命令`: 执行{num}次命令


## 撤销
- `u`: 撤销上一次修改
- `U`: 撤销对整行的修改
- `<C-r>`: 重做, 即取消刚才的撤销


## 查找
- `*`: 向下查找当前单词
- `#`: 向上查找当前单词
- `/text`: 向下查找text
- `?text`: 向上查找text
- `/^text`: 以text开头的行
- `/text$`: 以text结尾的行
- `n`: 查找next
- `N`: 查找前一个
- 以下字符需转义: `.*[]^%/?~$`
- `:noh`: 取消搜索高亮


## 替换
- `r{char}`: 将当前字符替换为{char}
- `R`: 替换模式, 相当于<Insert>键


## 加减运算
- `{num}<C-a>`: 把当前光标或之后的一个数值加上{num}
- `{num}<C-x>`: 把当前光标或之后的一个数值减去{num}


## 命令行模式
- `:[range]d`: delete删除范围内的行
  - `:{start},{end}d`: 删除第{start}行至第{end}行, 缺省或.当前行, $末行, %所有行
- `:[range]y`: yank复制范围内的行
- `:[range]j`: join连接范围内的行
- `:[range]m{address}`: move把范围内的行移动到 {address} 指定的行下
- `:[range]t{address}`: copy把范围内的行复制到 {address} 指定的行下
- `:[range]s/{pattern}/{string}/[flags]`: substitute把{pattern}替换为{string}
  - `:s/old/new/`: 替换当前行的第一个匹配
  - `:s/old/new/g`: 替换当前行的所有匹配
  - `:%s/old/new/`: 替换所有行的第一个匹配
  - `:%s/old/new/gc`: 替换所有行的所有匹配, 逐个确认
  - `:1,9s/^/    /`: 第1行至第9行每行前加四个空格
- `:[range]g/{pattern}/[cmd]`: global对范围内匹配{pattern}的所有行执行{cmd}
- `:[range]v/{pattern}/[cmd]`: vglobal对范围内不匹配{pattern}的所有行执行{cmd}
- `:[range]norm [cmd]`: normal对范围内的所有行执行正常模式{cmd}, 每行光标在行首
  - `:1,9norm i    `: 第1行至第9行每行前加四个空格

> 可视模式下选择了范围, 则[range]默认为选区的起始行至结束行`'<,'>`


## shell命令
- `:!{cmd}`: 执行shell命令{cmd}
  - `:!ls`: 执行命令ls
- `:[range]!{filter}`: 用外部程序{filter}过滤范围内的所有行
  - `:%!grep {pattern}`: 用外部程序grep过滤所有行
